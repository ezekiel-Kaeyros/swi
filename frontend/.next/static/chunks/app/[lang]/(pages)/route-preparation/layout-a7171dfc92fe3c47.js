(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6133],{94329:function(e,t,o){Promise.resolve().then(o.bind(o,38519))},38519:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return h}});var n=o(57437),l=o(2929),i=o(34352),r=o(95445),s=o(2265),a=o(72633),c=o(19736),u=o(39867),d=o(15768),f=o(20357),p=()=>{let{dispatch:e,routes:t,selectedRouteId:o}=(0,l.W)(),i=t.find(e=>(null==e?void 0:e.id)===1);return console.log("CURRENT ROUTE",i),(0,n.jsxs)(a.D5,{center:{lat:61.2176,lng:-149.8997},zoom:18,mapId:f.env.NEXT_PUBLIC_MAP_ID,children:[(0,n.jsx)(c.Z,{color:"blue"}),null==i?void 0:i.pointOfSales.map(e=>(0,n.jsx)(u.Z,{position:e.position,active:!0,markerColor:"red",children:(0,n.jsx)(d.Z,{shopDetails:e})},e.id))]})},v=o(76077);function h(e){let{children:t}=e,{toggleMapsValue:o,showAllRoutes:a,dispatch:c}=(0,l.W)();return(0,s.useEffect)(()=>{a&&c((0,v.e2)({selectedRouteId:0}))}),(0,n.jsxs)("main",{className:"flex flex-col lg:flex-row",children:[(0,n.jsx)("div",{className:"w-8/12 overflow-y-scroll h-screen",children:t}),(0,n.jsx)("div",{className:"w-full",children:a?(0,n.jsx)(r.default,{}):o?(0,n.jsx)(p,{}):(0,n.jsx)(i.Z,{})})]})}},95445:function(e,t,o){"use strict";o.d(t,{default:function(){return f}});var n=o(57437);o(2265);var l=o(72633),i=o(19736),r=o(39867),s=o(2929),a=o(50702);let c=(()=>{let e=new Set;return()=>{let t="#";do for(let e=0;e<6;e++)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];while(e.has(t));return e.add(t),16777216===e.size&&e.clear(),t}})();var u=o(15768),d=o(20357),f=()=>{let{dispatch:e,routes:t,selectedRouteId:o}=(0,s.W)(),{pointOfSales:f}=(0,a.H)();return console.log("ALL ROUTES",t),(0,n.jsxs)(l.D5,{center:{lat:61.2176,lng:-149.8997},zoom:18,mapId:d.env.NEXT_PUBLIC_MAP_ID,children:[t.map(e=>{let t=c();return(0,n.jsx)(i.Z,{route:e,color:t},e.id)}),f.map(e=>(0,n.jsx)(r.Z,{position:e.position,active:!0,markerColor:"red",children:(0,n.jsx)(u.Z,{shopDetails:e})},e.id))]})}},19736:function(e,t,o){"use strict";o.d(t,{Z:function(){return s}});var n=o(2265),l=o(72633);async function i(e,t,o,n){console.log("current route",o);let l=null==o?void 0:o.pointOfSales,i={lat:l[0].position.lat,lng:l[0].position.lng},r={lat:l[l.length-1].position.lat,lng:l[l.length-1].position.lng},s=[...l.slice(1,-1)].map(e=>({location:{lat:e.position.lat,lng:e.position.lng},stopover:!0}));e.route({origin:i,destination:r,waypoints:s,travelMode:google.maps.TravelMode.DRIVING}).then(e=>{t.setDirections(e)}).catch(e=>{alert("Could not display directions due to:"+e)})}var r=o(2929),s=e=>{let{color:t,route:o}=e,s=(0,l.Sx)(),a=(0,l.kY)("routes"),{dispatch:c,selectedRouteId:u,routes:d}=(0,r.W)(),f=d.find(e=>{var t;return(null==e?void 0:null===(t=e.id)||void 0===t?void 0:t.toString())===(null==u?void 0:u.toString())});console.log("selected route id",u),console.log("curret ",f);let[p,v]=(0,n.useState)(),[h,g]=(0,n.useState)();return(0,n.useEffect)(()=>{a&&s&&(v(new a.DirectionsService),g(new a.DirectionsRenderer({map:s,polylineOptions:{strokeColor:t,strokeWeight:4}})))},[s,a,t]),(0,n.useEffect)(()=>{p&&h&&(f?i(p,h,f):i(p,h,o))},[p,h,f,u,o]),null}}},function(e){e.O(0,[6648,1264,231,1444,738,1150,2232,6077,4352,2971,7023,1744],function(){return e(e.s=94329)}),_N_E=e.O()}]);