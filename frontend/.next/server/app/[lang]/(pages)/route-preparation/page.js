(()=>{var e={};e.id=448,e.ids=[448],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},61752:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>h,tree:()=>c}),r(61291),r(4516),r(41037),r(30754),r(35866);var s=r(23191),l=r(88716),a=r(37922),i=r.n(a),n=r(95231),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);r.d(t,o);let c=["",{children:["[lang]",{children:["(pages)",{children:["route-preparation",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,61291)),"/home/ezekiel-kaeyros/githubci/swi/frontend/src/app/[lang]/(pages)/route-preparation/page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,4516)),"/home/ezekiel-kaeyros/githubci/swi/frontend/src/app/[lang]/(pages)/route-preparation/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,41037)),"/home/ezekiel-kaeyros/githubci/swi/frontend/src/app/[lang]/(pages)/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,30754)),"/home/ezekiel-kaeyros/githubci/swi/frontend/src/app/[lang]/(pages)/not-found.tsx"]}]},{}]},{"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],d=["/home/ezekiel-kaeyros/githubci/swi/frontend/src/app/[lang]/(pages)/route-preparation/page.tsx"],u="/[lang]/(pages)/route-preparation/page",p={require:r,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/[lang]/(pages)/route-preparation/page",pathname:"/[lang]/route-preparation",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},78455:(e,t,r)=>{Promise.resolve().then(r.bind(r,69455))},38689:(e,t,r)=>{Promise.resolve().then(r.bind(r,31242))},69455:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var s=r(10326),l=r(2061),a=r(49861),i=r(90355);r(17577);var n=r(22080),o=r(89122),c=r(13334),d=r(86526);let u=()=>{let{dispatch:e,routes:t,selectedRouteId:r}=(0,l.W)(),a=t.find(e=>e?.id===1);return console.log("CURRENT ROUTE",a),(0,s.jsxs)(n.D5,{center:{lat:61.2176,lng:-149.8997},zoom:18,mapId:process.env.NEXT_PUBLIC_MAP_ID,children:[s.jsx(o.Z,{color:"blue"}),a?.pointOfSales.map(e=>s.jsx(c.Z,{position:e.position,active:!0,markerColor:"red",children:s.jsx(d.Z,{shopDetails:e})},e.id))]})};function p({children:e}){let{toggleMapsValue:t,showAllRoutes:r,dispatch:n}=(0,l.W)();return(0,s.jsxs)("main",{className:"flex flex-col lg:flex-row",children:[s.jsx("div",{className:"w-8/12 overflow-y-scroll h-screen",children:e}),s.jsx("div",{className:"w-full",children:r?s.jsx(i.default,{}):t?s.jsx(u,{}):s.jsx(a.Z,{})})]})}r(76054)},70308:(e,t,r)=>{"use strict";r.d(t,{z:()=>d});var s=r(10326),l=r(28671);r(17577);var a=r(90434),i=r(46226),n=r(73765),o=r(68703);let c=(0,l.j)("w-full  text-white font-medium py-4 flex justify-center px-4  rounded-full focus:outline-none focus:shadow-outline",{variants:{variant:{default:"bg-buttonPrimary  text-white hover:opacity-90",primary:"bg-indigo-700 hover:bg-indigo-900",secondary:"bg-[#EEF3FB] hover:opacity-90 text-[#2C353A]",danger:"bg-red-500 w-full text-white hover:bg-red-600",outline:"bg-white w-full text-gray-700 border border-slate-300 hover:bg-greenpale hover:text-white hover:border-greenpale",disabled:"bg-buttonPrimary opacity-50 w-full text-white"}},defaultVariants:{variant:"default"}}),d=({variant:e,className:t,href:r,icon:l,children:d,...u})=>r?s.jsx(o.default,{children:l?(0,s.jsxs)(a.default,{href:r,className:(0,n.cn)(c({variant:e,className:t})),children:[s.jsx("span",{className:"mr-2",children:l?s.jsx(i.default,{src:l,alt:"Icon"}):""}),d]}):s.jsx(a.default,{href:r,className:(0,n.cn)(c({variant:e,className:t})),children:d})}):s.jsx(o.default,{children:s.jsx("button",{...u,className:(0,n.cn)(c({variant:e,className:t})),children:(0,s.jsxs)("div",{className:"flex items-center justify-center whitespace-nowrap font-medium text-[13px]",children:[s.jsx("span",{className:"mr-2",children:l?s.jsx(i.default,{width:15,src:l,alt:"Icon"}):""}),s.jsx("div",{className:"mt-[.2rem] font-bold font-articulat",children:d})]})})})},90355:(e,t,r)=>{"use strict";r.d(t,{default:()=>u});var s=r(10326);r(17577);var l=r(22080),a=r(89122),i=r(13334),n=r(2061),o=r(469);let c=(()=>{let e=new Set;return()=>{let t="#";do for(let e=0;e<6;e++)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];while(e.has(t));return e.add(t),16777216===e.size&&e.clear(),t}})();var d=r(86526);let u=()=>{let{dispatch:e,routes:t,selectedRouteId:r}=(0,n.W)(),{pointOfSales:u}=(0,o.H)();return console.log("ALL ROUTES",t),(0,s.jsxs)(l.D5,{center:{lat:61.2176,lng:-149.8997},zoom:18,mapId:process.env.NEXT_PUBLIC_MAP_ID,children:[t.map(e=>{let t=c();return s.jsx(a.Z,{route:e,color:t},e.id)}),u.map(e=>s.jsx(i.Z,{position:e.position,active:!0,markerColor:"red",children:s.jsx(d.Z,{shopDetails:e})},e.id))]})}},49861:(e,t,r)=>{"use strict";r.d(t,{Z:()=>j});var s=r(10326),l=r(22080),a=r(13334),i=r(469),n=r(86526),o=r(2238),c=r(35047),d=r(46226);r(17577);var u=r(20572),p=r(64830),h=r(31927),x=r(70308),f=r(2061),m=r(76054);let g=({shopDetails:e})=>{let{selectedRouteId:t,dispatch:r}=(0,f.W)(),l=()=>{r((0,m.l9)({routeId:t,posId:e?.id}))};return s.jsx("div",{children:(0,s.jsxs)("div",{className:"bg-white max-w-[20rem] text-[#2C353A] p-4 rounded-xl",children:[s.jsx(d.default,{className:"rounded-xl w-full h-16 object-cover",src:h.Z,alt:"Image of the shop"}),(0,s.jsxs)("div",{className:"w-full mt-2",children:[s.jsx("h1",{className:"font-bold",children:e?.name}),s.jsx("h3",{className:"opacity-80 text-sm pr-4 pb-2",children:e?.shopLocation}),(0,s.jsxs)("div",{className:"flex items-center   gap-2 w-full justify-start flex-wrap",children:[(0,s.jsxs)("div",{className:"flex items-center pr-2 h-8 bg-[#CCEAF7] px-3 py-1 rounded-full",children:[s.jsx(d.default,{src:u.Z,alt:"Contact icon"}),(0,s.jsxs)("h1",{className:"text-sm ml-1.5",children:[e?.contact," "]})]}),(0,s.jsxs)("div",{className:"flex items-center pr-2 h-8 bg-[#CCEAF7] px-3 py-1 rounded-full",children:[s.jsx(d.default,{src:p.Z,alt:"User icon"}),(0,s.jsxs)("h1",{className:"text-sm ml-1.5",children:[e?.shopOwner," "]})]})]}),s.jsx("h1",{className:"font-bold my-2",children:"Tasks"}),s.jsx("ul",{className:"flex space-x-4 flex-wrap",children:e?.tasks?.map(e=>s.jsx("li",{className:"px-2 py-1 rounded-full  text-sm bg-[#CCEAF7]",children:e?.name},e?.id))}),s.jsx("div",{className:"mt-8 mb-2",children:e?.tasks?.length!==0&&s.jsx(x.z,{onClick:()=>l(),className:"w-fit py-1",children:"Add to route"})})]})]})})};function j(){let{pointOfSales:e,dispatch:t}=(0,i.H)(),{selectedRouteId:r,routes:d}=(0,f.W)();d?.find(e=>e?.id.toString()===r?.toString()),console.log("List of point of sales in state",e);let u=(0,c.usePathname)();return console.log("path",u),s.jsx(l.D5,{center:{lat:3.8852761566538545,lng:11.502079803888337},zoom:15,mapId:"6fc7264e643ee8b1",onClick:e=>{let{latLng:r}=e.detail;console.log("Map got clicked"),console.log("event",e),console.log("Coordinates clicked",r.lat,r.lng),t((0,o.eH)({latitude:r.lat,longitude:r.lng}))},children:e?.map(e=>(console.log("position of poss",e.position),s.jsx(a.Z,{position:e.position,active:!0,markerColor:e.markerColor,children:/\/(\d+)$/.test(u)?s.jsx(g,{shopDetails:e}):s.jsx(n.Z,{shopDetails:e})},e.id)))})}},79190:(e,t,r)=>{"use strict";function s(e){if(isNaN(e)||e<0)return"Invalid input";let t=Math.floor(e/60)?.toString().padStart(2,"0"),r=(e%60)?.toString()?.padStart(2,"0");return`${t}h:${r}min`}function l(e){return e?.reduce((e,t)=>e+t?.pointOfSales?.reduce((e,t)=>e+(t?.tasks||[]).reduce((e,t)=>e+(t.duration||0),0),0),0)}function a(e){return e?.reduce((e,t)=>s(e+t?.pointOfSales?.reduce((e,t)=>e+(t?.tasks||[]).reduce((e,t)=>e+(t.duration||0),0),0)),0)}r.d(t,{Os:()=>s,k:()=>l,ks:()=>a})},469:(e,t,r)=>{"use strict";r.d(t,{H:()=>l});var s=r(25842);let l=()=>({pointOfSales:(0,s.v9)(e=>e?.pointOfSaleViewReducer.pointOfSales),dispatch:(0,s.I0)()})},31242:(e,t,r)=>{"use strict";r.d(t,{default:()=>y});var s=r(10326),l=r(17577),a=r(46226),i=r(70308);let n={src:"/_next/static/media/routeIcon.b5c3c749.svg",height:32,width:33,blurWidth:0,blurHeight:0};var o=r(2061),c=r(76054),d=r(35047);let u=()=>{let{dispatch:e}=(0,o.W)(),{push:t}=(0,d.useRouter)(),r=()=>{e((0,c.ot)({})),e((0,c.AB)({showAllRoutes:!1})),t("/route-preparation/create")};return(0,s.jsxs)("div",{className:"border flex flex-col items-center justify-center p-4 border-dashed rounded-xl",children:[s.jsx(a.default,{src:n,alt:"Routing image"}),s.jsx("h1",{className:"my-4",children:"No Active Route"}),s.jsx(i.z,{onClick:()=>r(),className:"w-fit mx-auto",children:"Create Route"})]})},p={src:"/_next/static/media/eyeIcon.77dfaef2.svg",height:24,width:24,blurWidth:0,blurHeight:0};var h=r(72969),x=r(21867);let f={src:"/_next/static/media/eyeClosedIcon.55627616.svg",height:24,width:24,blurWidth:0,blurHeight:0},m={src:"/_next/static/media/rightIcon.7c333bf8.svg",height:24,width:24,blurWidth:0,blurHeight:0};var g=r(68703),j=r(79190);let v=({id:e,numberOfPos:t,routeName:r,salesName:i,activitiesDuration:n,profilePicture:u})=>{let[v,b]=(0,l.useState)(!1),{dispatch:y,routes:w}=(0,o.W)(),{push:N}=(0,d.useRouter)();(0,l.useEffect)(()=>{y((0,c.e2)({selectedRouteId:e}))},[y,e]);let k=e=>{b(e=>!e)},P=e=>{y((0,c.AB)({showAllRoutes:!1})),y((0,c.EU)({toggle:!0})),N(`/route-preparation/${e}`)},_=w?.filter(t=>t?.id.toString()===e?.toString()),C=(0,j.ks)(_);return console.log("salesName",i),(0,s.jsxs)("div",{className:"bg-cardDark  justify-between w-full  rounded-xl p-4",children:[s.jsx("div",{className:"flex items-center w-full",children:(0,s.jsxs)("div",{className:"flex justify-between w-full",children:[(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"mb-2",children:r&&r}),s.jsx("div",{children:u?s.jsx(a.default,{src:u,alt:"Sales rep profile picture"}):i&&(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-7 h-7 flex items-center justify-center bg-slate-400 rounded-full",children:i&&i?.length!==0&&i[0]?.charAt(0)}),s.jsx("h1",{className:" text-sm ml-2 text-slate-300",children:i&&i?.length!==0&&i[0]||"No sales rep assigned"})]})})]}),(0,s.jsxs)("div",{className:"bg-bgColorDark rounded-full flex items-center w-fit py-2 h-fit px-3",children:[s.jsx(a.default,{src:h.Z,alt:"Shop icon"}),s.jsx("h1",{className:"text-sm ml-1",children:t?`${t} Shop${parseInt(t)>=1&&"s"}`:""})]})]})}),(0,s.jsxs)("div",{className:"flex mt-6 items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx(a.default,{src:x.Z,alt:"Timer icon"}),s.jsx("h1",{className:"font-bold ml-1",children:C})]}),(0,s.jsxs)("div",{className:"flex",children:[s.jsx(g.default,{children:s.jsx("div",{onClick:()=>k(e),className:" bg-bgColorDark w-10 h-10 flex items-center justify-center p-1 rounded-full",children:s.jsx(a.default,{className:"w-8",src:v?f:p,alt:"Show and hide route"})})}),s.jsx(g.default,{children:s.jsx("div",{onClick:()=>P(e),className:" bg-bgColorDark flex justify-center items-center w-10 h-10  p-1 rounded-full ml-2",children:s.jsx(a.default,{className:"w-8",src:m,alt:"Show and hide route"})})})]})]})]})},b={src:"/_next/static/media/addRouteIcon.6aaa563a.svg",height:24,width:25,blurWidth:0,blurHeight:0},y=()=>{let{routes:e,dispatch:t}=(0,o.W)(),{push:r}=(0,d.useRouter)(),l=()=>{t((0,c.ot)({})),t((0,c.AB)({showAllRoutes:!1})),t((0,c.EU)({toggle:!1})),r("/route-preparation/create")};return(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"font-bold text-2xl mb-8",children:"Route planning"}),e?.length!==0&&s.jsx(i.z,{icon:b,onClick:()=>l(),className:"mb-8  w-full py-3 ml-auto",children:"Add new route"}),s.jsx("div",{className:"space-y-6 flex flex-col",children:e?.length!==0?e?.map(e=>s.jsx("div",{onClick:()=>{t(c.e2({selectedRouteId:e?.id}))},children:s.jsx(v,{activitiesDuration:e?.activitiesDuration,id:e?.id,numberOfPos:e?.pointOfSales?.length,numberOfTasksCompleted:"",profilePicture:"",routeName:e?.routeName,salesName:e?.salesRepresentative},e?.id)},e?.id)):s.jsx(u,{})})]})}},73765:(e,t,r)=>{"use strict";r.d(t,{cn:()=>a});var s=r(41135),l=r(43249);function a(...e){return(0,l.m)((0,s.W)(e))}},54365:(e,t)=>{"use strict";function r(){return null}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r}}),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},4516:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>i,__esModule:()=>a,default:()=>n});var s=r(68570);let l=(0,s.createProxy)(String.raw`/home/ezekiel-kaeyros/githubci/swi/frontend/src/app/[lang]/(pages)/route-preparation/layout.tsx`),{__esModule:a,$$typeof:i}=l;l.default;let n=(0,s.createProxy)(String.raw`/home/ezekiel-kaeyros/githubci/swi/frontend/src/app/[lang]/(pages)/route-preparation/layout.tsx#default`)},61291:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var s=r(19510),l=r(68570);let a=(0,l.createProxy)(String.raw`/home/ezekiel-kaeyros/githubci/swi/frontend/src/app/modules/route-preparation/RoutePreparation.tsx`),{__esModule:i,$$typeof:n}=a;a.default;let o=(0,l.createProxy)(String.raw`/home/ezekiel-kaeyros/githubci/swi/frontend/src/app/modules/route-preparation/RoutePreparation.tsx#default`);function c({}){return s.jsx("div",{className:"h-full pr-8 py-8 2xl:w-11/12 mx-auto",children:s.jsx(o,{})})}},21867:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s={src:"/_next/static/media/timeIcon.eca7d636.svg",height:32,width:32,blurWidth:0,blurHeight:0}},28671:(e,t,r)=>{"use strict";r.d(t,{j:()=>a});let s=e=>"boolean"==typeof e?"".concat(e):0===e?"0":e,l=function(){for(var e,t,r=0,s="";r<arguments.length;)(e=arguments[r++])&&(t=function e(t){var r,s,l="";if("string"==typeof t||"number"==typeof t)l+=t;else if("object"==typeof t){if(Array.isArray(t))for(r=0;r<t.length;r++)t[r]&&(s=e(t[r]))&&(l&&(l+=" "),l+=s);else for(r in t)t[r]&&(l&&(l+=" "),l+=r)}return l}(e))&&(s&&(s+=" "),s+=t);return s},a=(e,t)=>r=>{var a;if((null==t?void 0:t.variants)==null)return l(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:i,defaultVariants:n}=t,o=Object.keys(i).map(e=>{let t=null==r?void 0:r[e],l=null==n?void 0:n[e];if(null===t)return null;let a=s(t)||s(l);return i[e][a]}),c=r&&Object.entries(r).reduce((e,t)=>{let[r,s]=t;return void 0===s||(e[r]=s),e},{});return l(e,o,null==t?void 0:null===(a=t.compoundVariants)||void 0===a?void 0:a.reduce((e,t)=>{let{class:r,className:s,...l}=t;return Object.entries(l).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...n,...c}[t]):({...n,...c})[t]===r})?[...e,r,s]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[377,471,231,86,126,373],()=>r(61752));module.exports=s})();